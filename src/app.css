@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-specific improvements */
@layer base {
  /* Prevent zoom on input focus on iOS */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  input[type="date"],
  input[type="time"],
  textarea,
  select {
    font-size: 16px !important;
  }

  /* Smooth scrolling for mobile */
  html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent text selection on buttons */
  button {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Better touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Mobile-safe area padding */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Prevent horizontal scroll on mobile */
  body {
    overflow-x: hidden;
  }
}

@layer components {
  /* Mobile-optimized cards */
  .mobile-card {
    @apply bg-white rounded-2xl shadow-lg border border-gray-100 p-6;
    backdrop-filter: blur(10px);
  }

  /* Mobile-optimized buttons */
  .mobile-button {
    @apply px-6 py-4 rounded-xl font-semibold transition-all duration-200;
    @apply active:scale-95 focus:outline-none focus:ring-4 focus:ring-opacity-50;
    min-height: 56px;
  }

  .mobile-button-primary {
    @apply mobile-button bg-gradient-to-r from-indigo-600 to-purple-600 text-white;
    @apply hover:from-indigo-700 hover:to-purple-700 focus:ring-indigo-300;
  }

  .mobile-button-secondary {
    @apply mobile-button bg-gray-100 text-gray-900;
    @apply hover:bg-gray-200 focus:ring-gray-300;
  }

  /* Mobile-optimized inputs */
  .mobile-input {
    @apply w-full px-4 py-3 text-lg border border-gray-300 rounded-xl;
    @apply focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors;
    @apply bg-white shadow-sm;
    min-height: 48px;
    -webkit-appearance: none;
  }

  /* Mobile-optimized navigation */
  .mobile-nav-item {
    @apply flex flex-col items-center py-2 px-3 min-w-0 flex-1 transition-colors;
    @apply text-gray-500 hover:text-gray-700;
  }

  .mobile-nav-item.active {
    @apply text-indigo-600;
  }

  /* Mobile-optimized charts */
  .mobile-chart-container {
    @apply relative w-full flex justify-center items-center;
    @apply border border-gray-200 rounded-xl bg-gray-50 overflow-hidden;
    @apply touch-pan-x touch-pan-y;
    aspect-ratio: 1;
    min-height: 350px;
    max-height: 800px;
  }

  /* Mobile-optimized tooltips */
  .mobile-tooltip {
    @apply absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded-lg;
    @apply shadow-lg max-w-xs;
    backdrop-filter: blur(10px);
  }

  /* Mobile-optimized modals */
  .mobile-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
    @apply bg-black bg-opacity-50 backdrop-blur-sm;
  }

  .mobile-modal-content {
    @apply bg-white rounded-2xl shadow-2xl max-w-sm w-full max-h-[90vh] overflow-y-auto;
    @apply p-6;
  }
}

@layer utilities {
  /* Mobile-specific utilities */
  .touch-none {
    touch-action: none;
  }

  .touch-pan-x {
    touch-action: pan-x;
  }

  .touch-pan-y {
    touch-action: pan-y;
  }

  .touch-pan-x-y {
    touch-action: pan-x pan-y;
  }

  /* Mobile-safe areas */
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pl-safe {
    padding-left: env(safe-area-inset-left);
  }

  .pr-safe {
    padding-right: env(safe-area-inset-right);
  }
}

/* Chart-specific mobile optimizations */
.chart-container {
  touch-action: pan-x pan-y pinch-zoom;
}

.chart-container svg {
  touch-action: pan-x pan-y pinch-zoom;
}

/* Mobile-optimized form elements */
input[type="date"],
input[type="time"] {
  -webkit-appearance: none;
  appearance: none;
}

input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator {
  background: transparent;
  bottom: 0;
  color: transparent;
  cursor: pointer;
  height: auto;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: auto;
}

/* Mobile-optimized dropdowns */
.mobile-dropdown {
  @apply absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg;
  @apply max-h-60 overflow-y-auto;
  backdrop-filter: blur(10px);
}

.mobile-dropdown-item {
  @apply w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50;
  @apply focus:outline-none transition-colors;
  min-height: 48px;
}

/* Mobile-optimized loading states */
.mobile-loading {
  @apply flex items-center justify-center p-8;
}

.mobile-loading-spinner {
  @apply w-8 h-8 border-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin;
}

/* Mobile-optimized error states */
.mobile-error {
  @apply bg-red-50 border border-red-200 rounded-xl p-4;
}

.mobile-error-text {
  @apply text-red-700 text-sm;
}

/* Mobile-optimized success states */
.mobile-success {
  @apply bg-green-50 border border-green-200 rounded-xl p-4;
}

.mobile-success-text {
  @apply text-green-700 text-sm;
}